<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- OPML generated by OPML Editor v10.1b19 on Sat, 04 Dec 2021 16:43:27 GMT -->
<opml version="2.0">
	<head>
		<title>nodeEditor: batchLoader2</title>
		<dateCreated>Sat, 04 Dec 2021 16:34:17 GMT</dateCreated>
		<dateModified>Sat, 04 Dec 2021 16:43:27 GMT</dateModified>
		<ownerName>Dave Winer</ownerName>
		<ownerId>http://davewiner.com/</ownerId>
		<expansionState>1, 5</expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>337</windowTop>
		<windowLeft>256</windowLeft>
		<windowBottom>1142</windowBottom>
		<windowRight>1448</windowRight>
		</head>
	<body>
		<outline text="/scripting.com/code/batchloader2/">
			<outline text="package.json" created="Sat, 04 Dec 2021 16:37:06 GMT">
				<outline text="{">
					<outline text="&quot;name&quot;: &quot;batchloader2&quot;,"/>
					<outline text="&quot;version&quot;: &quot;0.4.0&quot;,"/>
					<outline text="&quot;author&quot;: &quot;Dave Winer &lt;dave@scripting.com&gt;&quot;,"/>
					<outline text="&quot;main&quot;: &quot;batchloader2.js&quot;,"/>
					<outline text="&quot;dependencies&quot;: {">
						<outline text="&quot;daveutils&quot;: &quot;*&quot;,"/>
						<outline text="&quot;s3folderloader&quot;: &quot;*&quot;,"/>
						<outline text="&quot;davehttp&quot;: &quot;*&quot;"/>
						<outline text="}"/>
						</outline>
					<outline text="}"/>
					</outline>
				</outline>
			<outline text="batchloader2.js" created="Sat, 04 Dec 2021 16:35:07 GMT">
				<outline text="const myVersion = &quot;0.4.0&quot;, myProductName = &quot;batchloader2&quot;; "/>
				<outline text=""/>
				<outline text="const fs = require (&quot;fs&quot;);"/>
				<outline text="const utils = require (&quot;daveutils&quot;);"/>
				<outline text="const davehttp = require (&quot;davehttp&quot;);"/>
				<outline text="const s3folderloader = require (&quot;s3folderloader&quot;);"/>
				<outline text=""/>
				<outline text="const servername = &quot;peru&quot;;" created="Sat, 04 Dec 2021 16:38:23 GMT"/>
				<outline text="" created="Sat, 04 Dec 2021 16:38:30 GMT"/>
				<outline text="var config = {">
					<outline text="port: process.env.PORT || 1408,"/>
					<outline text="flLogToConsole: true,"/>
					<outline text="flAllowAccessFromAnywhere: true, "/>
					<outline text="timeOutSecs: 3,"/>
					<outline text="s3path: &quot;/allservers.scripting.com/&quot; + servername + &quot;/pagepark/&quot;,"/>
					<outline text="basefolder: &quot;/root/&quot; + servername + &quot;/pagepark/&quot;"/>
					<outline text="}"/>
					</outline>
				<outline text=""/>
				<outline text="davehttp.start (config, function (theRequest) {">
					<outline text="function returnOpml (opmltext) {">
						<outline text="theRequest.httpReturn (200, &quot;text/xml&quot;, opmltext);"/>
						<outline text="}"/>
						</outline>
					<outline text="function returnData (jstruct) {">
						<outline text="if (jstruct === undefined) {">
							<outline text="jstruct = {};"/>
							<outline text="}"/>
							</outline>
						<outline text="theRequest.httpReturn (200, &quot;application/json&quot;, utils.jsonStringify (jstruct));"/>
						<outline text="}"/>
						</outline>
					<outline text="function returnError (jstruct) {">
						<outline text="theRequest.httpReturn (500, &quot;application/json&quot;, utils.jsonStringify (jstruct));"/>
						<outline text="}"/>
						</outline>
					<outline text="function httpReturn (err, jstruct) {">
						<outline text="if (err) {">
							<outline text="returnError (err);"/>
							<outline text="}"/>
							</outline>
						<outline text="else {">
							<outline text="returnData (jstruct);"/>
							<outline text="}"/>
							</outline>
						<outline text="}"/>
						</outline>
					<outline text="switch (theRequest.lowerpath) {">
						<outline text="case &quot;/now&quot;:">
							<outline text="theRequest.httpReturn (200, &quot;text/plain&quot;, new Date ().toUTCString ());"/>
							<outline text="return;"/>
							</outline>
						<outline text="case &quot;/reload&quot;:">
							<outline text="s3folderloader.load (config.s3path, config.basefolder, function (jsontext) {">
								<outline text="returnData (JSON.parse (jsontext));"/>
								<outline text="});"/>
								</outline>
							<outline text="return;"/>
							</outline>
						<outline text="default:">
							<outline text="theRequest.httpReturn (404, &quot;text/plain&quot;, &quot;Not found.&quot;);"/>
							<outline text="return;"/>
							</outline>
						<outline text="}"/>
						</outline>
					<outline text="});"/>
					</outline>
				</outline>
			<outline text="readme.md" created="Sat, 04 Dec 2021 16:34:28 GMT">
				<outline text="# batchloader2" created="Sat, 04 Dec 2021 16:34:30 GMT">
					<outline text="A much-simpliefied batchloader, designed for PagePark installations. " created="Sat, 04 Dec 2021 16:34:38 GMT"/>
					</outline>
				</outline>
			</outline>
		<outline text="build script" created="Sat, 04 Dec 2021 16:40:15 GMT">
			<outline text="nodeEditorSuite.utilities.buildBatchLoader2 ()" created="Sat, 04 Dec 2021 16:40:18 GMT"/>
			</outline>
		</body>
	</opml>
